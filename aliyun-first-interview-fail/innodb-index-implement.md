## 面试题

数据库索引，底层是怎样实现的，为什么要用B+树索引？

## 解析

### Innodb索引实现

在Innodb中，数据按页储存，在每一页数据页中，各条记录按主键从小到大组成一个单向链表，其中还包括最大最小两条伪记录。

所有记录至少分为2组，每组最大记录的偏移量作为槽会记录到页目录当中，在页内通过页目录利用二分法找到对应槽，在槽内按顺序找到相应记录。

每个数据页的File Header部分都有上一个和下一个页的编号，所以所有的数据页会组成一个双向链表。

在非叶子节点的数据页中，里面的记录保存了主键值和对应下一层的页号，主键值是对应页中最小的主键值。

非叶子节点的数据页和叶子节点的数据页除了里面的记录有所不同，其他结构相同。

### 为什么使用B+树

相比于hash索引，B+树可以更快速的范围查找。

相比于B树索引，B树在非叶结点中存储数据，导致范围查找时可能会带来更多的随机I/O。